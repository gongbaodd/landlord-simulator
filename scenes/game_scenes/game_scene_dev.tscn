[gd_scene load_steps=37 format=4 uid="uid://mjro4wolswe5"]

[ext_resource type="Script" path="res://scenes/game_scenes/game_scene_dev.gd" id="1_aodx8"]
[ext_resource type="Script" path="res://scripts/movement/top_down_controller.gd" id="1_jfvbw"]
[ext_resource type="Script" path="res://scripts/movement/flip_to_cursor.gd" id="2_hc0u8"]
[ext_resource type="Shader" path="res://shaders/sprite.gdshader" id="3_1jd5w"]
[ext_resource type="Texture2D" uid="uid://ctuyqlhugsiwo" path="res://icon.svg" id="4_rxfhd"]
[ext_resource type="Script" path="res://scripts/interaction/hit/hitbox.gd" id="5_l1rh8"]
[ext_resource type="Script" path="res://scripts/interaction/effects/sprite_shake_effect.gd" id="6_74d53"]
[ext_resource type="Script" path="res://scripts/interaction/effects/empty_effect.gd" id="6_t38u7"]
[ext_resource type="Script" path="res://scripts/interaction/effects/slow_mo_effect.gd" id="7_dkkl8"]
[ext_resource type="Script" path="res://scripts/interaction/effects/color_flicker_effect.gd" id="8_31s2l"]
[ext_resource type="Script" path="res://scripts/interaction/effects/particle_effect.gd" id="9_f17s0"]
[ext_resource type="Script" path="res://scripts/movement/pointer_rotator.gd" id="10_ynff2"]
[ext_resource type="Texture2D" uid="uid://dqnvyneq7rl8f" path="res://sprites/common/gun.png" id="11_c15hv"]
[ext_resource type="Script" path="res://scripts/gameplay/gun.gd" id="12_eilnm"]
[ext_resource type="PackedScene" uid="uid://bkywrvgqsvvmu" path="res://scenes/common/bullet.tscn" id="13_eyne8"]
[ext_resource type="Script" path="res://scripts/interaction/effects/camera_shake_effect.gd" id="14_imj4u"]
[ext_resource type="Script" path="res://scripts/camera/camera_targeter.gd" id="15_lp3aw"]
[ext_resource type="Script" path="res://scripts/camera/camera_shaker.gd" id="16_hgb43"]
[ext_resource type="Script" path="res://scripts/interaction/hit/hurtbox.gd" id="17_qh4jg"]
[ext_resource type="Texture2D" uid="uid://bs5ru4bg8n3bj" path="res://sprites/tilesets/test-tileset.png" id="19_ax58t"]
[ext_resource type="PackedScene" uid="uid://bvqirlofwhl5g" path="res://scenes/game_scenes/prefabs/door.tscn" id="20_rp6dp"]
[ext_resource type="Resource" uid="uid://dva5o48sv6fkd" path="res://dialogues/interact.tres" id="22_u74er"]
[ext_resource type="PackedScene" uid="uid://1ovtd7dawkr6" path="res://scenes/game_scenes/prefabs/dialog.tscn" id="23_11ufv"]
[ext_resource type="PackedScene" uid="uid://ghuvjtihmhxv" path="res://scenes/game_scenes/prefabs/character.tscn" id="24_34hmd"]
[ext_resource type="Theme" uid="uid://dc6c1peo4pfyr" path="res://addons/dialogue_nodes/themes/bubbly.theme" id="26_7egdx"]

[sub_resource type="NavigationPolygon" id="NavigationPolygon_p3djs"]
vertices = PackedVector2Array(-109, -1423, 1027, -1404, 1910, -629, 2329, 558, 907, 1529, -1430, 1047, -1195, -972)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3, 4, 5, 6)])
outlines = Array[PackedVector2Array]([PackedVector2Array(-1195, -972, -1430, 1047, 907, 1529, 2329, 558, 1910, -629, 1027, -1404, -109, -1423)])

[sub_resource type="CircleShape2D" id="CircleShape2D_o6q7h"]
radius = 51.8

[sub_resource type="ShaderMaterial" id="ShaderMaterial_garof"]
resource_local_to_scene = true
shader = ExtResource("3_1jd5w")
shader_parameter/is_shaking = true
shader_parameter/amplitude = 0.0
shader_parameter/is_flickering = false
shader_parameter/flicker_color = Color(1, 1, 1, 1)
shader_parameter/flicker_frequency = 10.0

[sub_resource type="Resource" id="Resource_ej8lc"]
script = ExtResource("6_74d53")
sprite_path = NodePath("../Sprite2D")
max_amplitude = 5.0
shake_time = 1.0

[sub_resource type="Resource" id="Resource_iuduy"]
script = ExtResource("7_dkkl8")
slowmo_time = 0.5
slowmo_scale = 0.5

[sub_resource type="Resource" id="Resource_jtvvk"]
script = ExtResource("8_31s2l")
sprite_path = NodePath("../Sprite2D")
flicker_time = 1.0

[sub_resource type="Resource" id="Resource_qgl23"]
script = ExtResource("9_f17s0")
particles_path = NodePath("../../CPUParticles2D")

[sub_resource type="Resource" id="Resource_8ev03"]
script = ExtResource("14_imj4u")
camera_trauma = 1.0

[sub_resource type="RectangleShape2D" id="RectangleShape2D_n5ma2"]
size = Vector2(100, 100)

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_ysn8p"]
texture = ExtResource("19_ax58t")
texture_region_size = Vector2i(8, 8)
1:0/0 = 0
0:0/0 = 0
0:1/0 = 0
1:1/0 = 0
2:1/0 = 0
2:0/0 = 0
2:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-4, -4, 4, -4, 4, 4, -4, 4)
3:0/0 = 0
3:1/0 = 0

[sub_resource type="TileSet" id="TileSet_mb1ej"]
tile_size = Vector2i(8, 8)
physics_layer_0/collision_layer = 1
sources/0 = SubResource("TileSetAtlasSource_ysn8p")

[node name="game_scene_dev" type="Node2D"]
script = ExtResource("1_aodx8")

[node name="NavigationRegion2D" type="NavigationRegion2D" parent="."]
position = Vector2(-203, -124)
navigation_polygon = SubResource("NavigationPolygon_p3djs")

[node name="Player" type="CharacterBody2D" parent="."]
position = Vector2(693, -27)
motion_mode = 1
script = ExtResource("1_jfvbw")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Player"]
shape = SubResource("CircleShape2D_o6q7h")

[node name="Node2D" type="Node2D" parent="Player"]
script = ExtResource("2_hc0u8")

[node name="Sprite2D" type="Sprite2D" parent="Player/Node2D"]
material = SubResource("ShaderMaterial_garof")
texture = ExtResource("4_rxfhd")

[node name="HitBox" type="Area2D" parent="Player/Node2D"]
visible = false
collision_mask = 2
script = ExtResource("5_l1rh8")
hp = 50.0
damage_effects = Array[ExtResource("6_t38u7")]([SubResource("Resource_ej8lc"), SubResource("Resource_iuduy"), SubResource("Resource_jtvvk"), SubResource("Resource_qgl23")])

[node name="CollisionShape2D" type="CollisionShape2D" parent="Player/Node2D/HitBox"]
shape = SubResource("CircleShape2D_o6q7h")

[node name="Gun" type="Node2D" parent="Player/Node2D"]
visible = false
script = ExtResource("10_ynff2")

[node name="Sprite2D" type="Sprite2D" parent="Player/Node2D/Gun"]
texture_filter = 1
position = Vector2(89, 0)
scale = Vector2(5.815, 5.815)
texture = ExtResource("11_c15hv")

[node name="Node2D" type="Node2D" parent="Player/Node2D/Gun/Sprite2D"]
position = Vector2(4.12726, -2.06363)
scale = Vector2(0.171969, 0.171969)
script = ExtResource("12_eilnm")
bullet_scene = ExtResource("13_eyne8")
shoot_effects = Array[ExtResource("6_t38u7")]([SubResource("Resource_8ev03")])

[node name="CPUParticles2D" type="CPUParticles2D" parent="Player"]
emitting = false
amount = 1000
lifetime = 0.5
one_shot = true
explosiveness = 0.15
lifetime_randomness = 1.0
spread = 180.0
gravity = Vector2(0, 0)
initial_velocity_min = 86.54
initial_velocity_max = 86.54

[node name="Camera2D" type="Camera2D" parent="."]
position = Vector2(841.25, 9.5)
zoom = Vector2(0.1, 0.1)

[node name="CameraTargeter" type="Node" parent="Camera2D" node_paths=PackedStringArray("camera")]
script = ExtResource("15_lp3aw")
camera = NodePath("..")
min_zoom = 0.1
targets = Array[NodePath]([NodePath("../../Player"), NodePath("../../Spikes"), NodePath("../../Door"), NodePath("../../Character")])

[node name="CameraShaker" type="Node" parent="Camera2D"]
script = ExtResource("16_hgb43")
max_offset = Vector2(20, 20)
max_roll = 0.01
power = 1.0

[node name="Spikes" type="Area2D" parent="."]
position = Vector2(975, 249)
collision_layer = 2
script = ExtResource("17_qh4jg")

[node name="Sprite2D" type="Sprite2D" parent="Spikes"]
modulate = Color(1, 0, 0, 1)
texture = ExtResource("4_rxfhd")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Spikes"]
modulate = Color(1, 0, 0, 1)
shape = SubResource("RectangleShape2D_n5ma2")

[node name="NavigationObstacle2D" type="NavigationObstacle2D" parent="Spikes"]
radius = 175.82

[node name="WallTileMap" type="TileMapLayer" parent="."]
scale = Vector2(20, 20)
tile_map_data = PackedByteArray("AAAAAPv/AAACAAAAAAAAAPr/AAACAAAAAAAAAPn/AAACAAAAAAAAAPj/AAACAAAAAAAAAPf/AAACAAAAAAAAAPb/AAACAAAAAAAAAPX/AAACAAAAAAAAAPT/AAACAAAAAAAAAP7/AAACAAAAAAAAAP//AAACAAAAAAAAAAAAAAACAAAAAAAAAAEAAAACAAAAAAAAAAIAAAACAAAAAAAAAAMAAAACAAAAAAAAAAQAAAACAAAAAAAAAAUAAAACAAAAAAAAAAYAAAACAAAAAAAAAAcAAAACAAAAAAAAAAgAAAACAAAAAAAAAAkAAAACAAAAAAD///T/AAACAAAAAAD+//T/AAACAAAAAAD9//T/AAACAAAAAAD8//T/AAACAAAAAAD7//T/AAACAAAAAAD6//T/AAACAAAAAAD5//T/AAACAAAAAAD4//T/AAACAAAAAAD3//T/AAACAAAAAAD2//T/AAACAAAAAAD1//T/AAACAAAAAAD0//T/AAACAAAAAADz//T/AAACAAAAAADy//T/AAACAAAAAADx//T/AAACAAAAAADw//T/AAACAAAAAADv//T/AAACAAAAAADv//X/AAACAAAAAADv//b/AAACAAAAAADv//f/AAACAAAAAADv//j/AAACAAAAAADv//n/AAACAAAAAADv//r/AAACAAAAAADv//v/AAACAAAAAADv//z/AAACAAAAAADv//3/AAACAAAAAADv//7/AAACAAAAAADv////AAACAAAAAADv/wAAAAACAAAAAADv/wEAAAACAAAAAADv/wIAAAACAAAAAADv/wMAAAACAAAAAADv/wQAAAACAAAAAADv/wUAAAACAAAAAADv/wYAAAACAAAAAADv/wcAAAACAAAAAADv/wgAAAACAAAAAADv/wkAAAACAAAAAADw/wkAAAACAAAAAADx/wkAAAACAAAAAADy/wkAAAACAAAAAADz/wkAAAACAAAAAAD0/wkAAAACAAAAAAD1/wkAAAACAAAAAAD2/wkAAAACAAAAAAD3/wkAAAACAAAAAAD4/wkAAAACAAAAAAD5/wkAAAACAAAAAAD6/wkAAAACAAAAAAD7/wkAAAACAAAAAAD8/wkAAAACAAAAAAD9/wkAAAACAAAAAAD+/wkAAAACAAAAAAD//wkAAAACAAAAAAAAAPP/AAACAAAAAAAAAPL/AAACAAAAAAAAAPH/AAACAAAAAAAAAPD/AAACAAAAAAAAAO//AAACAAAAAAAAAO7/AAACAAAAAAAAAO3/AAACAAAAAAAAAOz/AAACAAAAAAAAAOv/AAACAAAAAAAAAOr/AAACAAAAAAAAAOn/AAACAAAAAAAAAOj/AAACAAAAAAABAOj/AAACAAAAAAACAOj/AAACAAAAAAADAOj/AAACAAAAAAAEAOj/AAACAAAAAAAFAOj/AAACAAAAAAAGAOj/AAACAAAAAAAHAOj/AAACAAAAAAAIAOj/AAACAAAAAAAJAOj/AAACAAAAAAAKAOj/AAACAAAAAAALAOj/AAACAAAAAAAMAOj/AAACAAAAAAANAOj/AAACAAAAAAAOAOj/AAACAAAAAAAPAOj/AAACAAAAAAAQAOj/AAACAAAAAAARAOj/AAACAAAAAAASAOj/AAACAAAAAAASAOn/AAACAAAAAAASAOr/AAACAAAAAAASAOv/AAACAAAAAAASAOz/AAACAAAAAAASAO3/AAACAAAAAAASAO7/AAACAAAAAAASAO//AAACAAAAAAASAPD/AAACAAAAAAASAPH/AAACAAAAAAASAPL/AAACAAAAAAASAPP/AAACAAAAAAASAPT/AAACAAAAAAASAPX/AAACAAAAAAASAPb/AAACAAAAAAASAPf/AAACAAAAAAASAPj/AAACAAAAAAASAPn/AAACAAAAAAASAPr/AAACAAAAAAASAPv/AAACAAAAAAASAPz/AAACAAAAAAASAP3/AAACAAAAAAASAP7/AAACAAAAAAASAP//AAACAAAAAAASAAAAAAACAAAAAAASAAEAAAACAAAAAAASAAIAAAACAAAAAAASAAMAAAACAAAAAAASAAQAAAACAAAAAAASAAUAAAACAAAAAAASAAYAAAACAAAAAAASAAcAAAACAAAAAAASAAgAAAACAAAAAAASAAkAAAACAAAAAAASAAoAAAACAAAAAAASAAsAAAACAAAAAAARAAsAAAACAAAAAAAQAAsAAAACAAAAAAAPAAsAAAACAAAAAAAOAAsAAAACAAAAAAANAAsAAAACAAAAAAAMAAsAAAACAAAAAAALAAsAAAACAAAAAAAKAAsAAAACAAAAAAAJAAsAAAACAAAAAAAIAAsAAAACAAAAAAAHAAsAAAACAAAAAAAGAAsAAAACAAAAAAAFAAsAAAACAAAAAAAEAAsAAAACAAAAAAADAAsAAAACAAAAAAACAAsAAAACAAAAAAABAAsAAAACAAAAAAAAAAsAAAACAAAAAAAAAAoAAAACAAAAAAA=")
tile_set = SubResource("TileSet_mb1ej")

[node name="Door" parent="." node_paths=PackedStringArray("dialog_control") instance=ExtResource("20_rp6dp")]
position = Vector2(74, -478)
scale = Vector2(1.68, 1.68)
dialog_control = NodePath("../CanvasLayer/Dialog")
dialog_data = ExtResource("22_u74er")

[node name="Character" parent="." node_paths=PackedStringArray("dialog_control") instance=ExtResource("24_34hmd")]
position = Vector2(1623, 294)
dialog_control = NodePath("../CanvasLayer/Dialog")

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="Dialog" parent="CanvasLayer" instance=ExtResource("23_11ufv")]
offset_top = -368.0
offset_bottom = -218.0
theme = ExtResource("26_7egdx")
